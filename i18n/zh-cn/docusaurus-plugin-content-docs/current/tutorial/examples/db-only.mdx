---
id: db-only
sidebar_label: 只使用数据库
title: "范例：只使用数据库扩展"
description: 以下范例，展示了只使用数据库扩展的做法。
slug: /examples/db-only
---

import useBaseUrl from "@docusaurus/useBaseUrl";

import ThemedImage from "@theme/ThemedImage";

import mdiLanguagePython from "@iconify-icons/mdi/language-python";

import {demoURL} from "@site/src/envs/variables";
import DarkButton from "@site/src/components/DarkButton";

查看以下链接，以阅览该基础范例。

<p>
  <DarkButton to={demoURL()} icon={mdiLanguagePython}>
    {"usage.py"}
  </DarkButton>
</p>

该范例提供了以下功能：

1. 一个包含两个表（`new_model`和`numerical_model`）的超简单数据库。
2. `new_model`和`numerical_model`之间通过一对多关系链接。
3. 每个`numerical_model`数据项包含一个浮点数值。
4. 范例将会透过向`numerical_model`施加不同的条件，逐个检索子项符合给定条件的`new_model`数据项。

数据库的实体关系图（entity-relationship diagram, ERD）如下：

<div className="mb-default center w-60">
  <ThemedImage
    alt="只使用数据库范例的ERD"
    sources={{
      light: useBaseUrl("/img/examples/erd-usage-light.svg"),
      dark: useBaseUrl("/img/examples/erd-usage-dark.svg"),
    }}
  />
</div>

检索的结果应当如下：

```log showLineNumbers
16:41:05,028 flask-sqlalchemy-compat.example INFO Start to add testing data.
16:41:05,036 flask-sqlalchemy-compat.example INFO Start to query data.
16:41:05,036 flask-sqlalchemy-compat.example INFO Query by name.
16:41:05,041 flask-sqlalchemy-compat.example INFO Queried: NewModel(id=3, name=mixed, n_vals=3)
16:41:05,041 flask-sqlalchemy-compat.example INFO Query all models having positive values.
16:41:05,043 flask-sqlalchemy-compat.example INFO Queried: [NewModel(id=1, name=only-pos, n_vals=3), NewModel(id=3, name=mixed, n_vals=3)]
16:41:05,043 flask-sqlalchemy-compat.example INFO Query all models having negative values.
16:41:05,045 flask-sqlalchemy-compat.example INFO Queried: [NewModel(id=2, name=only-neg, n_vals=3), NewModel(id=3, name=mixed, n_vals=3)]
16:41:05,045 flask-sqlalchemy-compat.example INFO Query all models having both positive and negative values.
16:41:05,047 flask-sqlalchemy-compat.example INFO Queried: [NewModel(id=3, name=mixed, n_vals=3)]
```
