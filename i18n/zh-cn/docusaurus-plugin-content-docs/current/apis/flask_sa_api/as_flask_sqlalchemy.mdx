---
id: as_flask_sqlalchemy
title: as_flask_sqlalchemy
sidebar_label: as_flask_sqlalchemy
slug: /apis/flask_sa_api/as_flask_sqlalchemy
description: 令db按照flask_sqlalchemy的方式工作。
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

import vsiCheckIcon from "@iconify-icons/codicon/check";

import InlineIcon from "@site/src/components/InlineIcon";
import APITopBar, {IconObjType} from "@site/src/components/APITopBar";

<APITopBar type="func" source="flask_sa_api.as_flask_sqlalchemy" />

```python
db: _SQLAlchemyDB = as_flask_sqlalchemy(db: _SQLAlchemyDB)
db: SQLAlchemyProxy[_SQLAlchemyLiteDB_co, _ModelLite_co] = as_flask_sqlalchemy(
     db: _SQLAlchemyLiteDB_co,
     model_class: Type[_ModelLite_co],
)
```

令`db`按照`flask_sqlalchemy`的方式工作。

## 别名 {#aliases}

该函数可以按以下方式之一获取

```python
import flask_sqlalchemy_compat as fsc


fsc.as_flask_sqlalchemy
fsc.flask_sa_api.as_flask_sqlalchemy
```

## 参数 {#arguments}

### 输入 {#requires}

|     参数      |                  类型                   |               必选                | <center>说明</center>                                                                                                                                                                                                                                               |
| :-----------: | :-------------------------------------: | :-------------------------------: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|     `db`      | `_SQLAlchemyDB \| _SQLAlchemyLiteDB_co` | <InlineIcon icon={vsiCheckIcon}/> | 需要封装的数据库扩展实例。                                                                                                                                                                                                                                          |
| `model_class` |          `Type[_ModelLite_co]`          |                                   | <p>若`db`并非来自`flask_sqlalchemy`时，用来模拟`db.Model`行为的基模型。须知这种情况下，为了添加诸如、自动表名称、query方法等兼容性功能，以和`flask_sqlalchemy.SQLAlchemy().Model`对齐，该值将会被原处修改。</p><p>若`db`来自`flask_sqlalchemy`，不应提供该值。</p> |

- 其中，`_SQLAlchemyDB`是[`fsc.protocols.SQLAlchemyProtocol`](../protocols/SQLAlchemyProtocol.mdx)的`TypeVar`。
- 其中，`_SQLAlchemyLiteDB_co`是[`fsc.protocols.SQLAlchemyLiteProtocol`](../protocols/SQLAlchemyLiteProtocol.mdx)的`TypeVar`。
- 其中，`_ModelLite_co`是`sa.orm.DeclarativeBase`的`TypeVar`。

### 输出 {#returns}

| 参数 |                                                     类型                                                      | <center>说明</center>                                                                                                                                                                                                          |
| :--: | :-----------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `db` | <code>{`flask_sqlalchemy.SQLAlchemy \| `}[SQLAlchemyProxy](./SQLAlchemyProxy.mdx){"(db, model_class)"}</code> | <p>若`db`来自`flask_sqlalchemy`，直接原样返回。</p><p>若`db`来自`flask_sqlalchemy_lite`，返回它的代理封装。该封装和`flask_sqlalchemy.SQLAlchemy()`有着相同的API，但底层是藉由`flask_sqlalchemy_lite.SQLAlchemy()`实现的。</p> |
