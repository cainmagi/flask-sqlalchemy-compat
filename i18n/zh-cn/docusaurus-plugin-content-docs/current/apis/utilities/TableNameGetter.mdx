---
id: TableNameGetter
title: TableNameGetter
sidebar_label: TableNameGetter
slug: /apis/utilities/TableNameGetter
description: __tablename__属性的访问器。
---

import IconExternalLink from "@theme/Icon/ExternalLink";

import APITopBar, {IconObjType} from "@site/src/components/APITopBar";

<APITopBar type="class" isDescriptor={true} source="utilities.TableNameGetter" />

```python
class AnyClass(sa.orm.DeclarativeBase):
    __tablename__ = TableNameGetter()

val: sa.orm.Query[AnyClass] = AnyClass.query
```

`__tablename__`属性的访问器。

按照以下方式使用该描述器：

```python
class Base(sa.orm.DeclarativeBase):
    __tablename__ = TableNameGetter()

class NewModel(Base): ...
```

或按以下方式亦可：

```python
class NewModel(Base):
    __tablename__ = TableNameGetter()
```

它将会

1. 阻止用户修改模型实例的`__tablename__`。
2. 若未显式定义表名称，则返回一个自动合成的表名称。

:::tip

你可能并不需要使用该描述器，因为以下代码具有等价的效果。这种用法同时也是[`sqlalchemy`<IconExternalLink/>][link-sqla]所建议的：

```python
class AnyClass(sa.orm.DeclarativeBase):
    @declared_attr.directive
    def __tablename__(cls) -> str:
        return fsc.utilities.TableNameGetter.calc_auto_table_name(cls.__name__)
```

:::

[link-sqla]: https://docs.sqlalchemy.org/en/20/orm/mapping_api.html#sqlalchemy.orm.declared_attr.directive

## 别名 {#aliases}

该类可以按以下方式之一获取

```python
import flask_sqlalchemy_compat as fsc


fsc.TableNameGetter
fsc.utilities.TableNameGetter
```
